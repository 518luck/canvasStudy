<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>äº”å­æ£‹</title>
    <style>
      canvas {
        background-color: #ffb077;
        display: block;
        margin: 0 auto;
      }
    </style>
  </head>
  <body>
    <script>
      let canvas = document.createElement('canvas')
      const dpr = window.devicePixelRatio || 1
      canvas.style.width = '600px'
      canvas.style.height = '600px'
      canvas.width = 600 * dpr
      canvas.height = 600 * dpr
      document.body.append(canvas)
      let ctx = canvas.getContext('2d')
      ctx.scale(dpr, dpr)

      // äº”å­æ£‹çš„æ£‹ç›˜é€šå¸¸æœ‰196ä¸ªæ ¼å­ã€‚æ£‹ç›˜ç”±14è¡Œå’Œ14åˆ—ç»„æˆ.
      const gridSize = 40 // ç½‘æ ¼å¤§å°
      const startOffset = 20 // èµ·å§‹åç§»é‡
      const lineCouint = 15 // çº¿æ¡æ•°é‡
      for (let i = 1; i <= lineCouint; i++) {
        ctx.moveTo(20, i * gridSize - startOffset)
        ctx.lineTo(20 + 14 * gridSize, i * gridSize - startOffset)
      }

      for (let i = 1; i <= lineCouint; i++) {
        ctx.moveTo(i * gridSize - startOffset, 20)
        ctx.lineTo(i * gridSize - startOffset, 20 + 14 * gridSize)
      }
      ctx.stroke()

      const circles = new Array(15)
        .fill(null)
        .map(() => new Array(15).fill(null))

      let isBlaack = true
      canvas.addEventListener('click', (e) => {
        let { offsetX, offsetY } = e

        let x =
          Math.round((offsetX - startOffset) / gridSize) * gridSize +
          startOffset

        let y =
          Math.round((offsetY - startOffset) / gridSize) * gridSize +
          startOffset

        const xIndex = Math.round((x - startOffset) / gridSize)
        const yIndex = Math.round((y - startOffset) / gridSize)
        if (circles[xIndex][yIndex]) return
        circles[xIndex][yIndex] = {
          x,
          y,
          isBlaack,
        }
        console.log('ğŸš€ ~ circles:', circles)

        ctx.beginPath()
        ctx.arc(x, y, 15, 0, Math.PI * 2)
        let tx = isBlaack ? x - 2 : x + 2
        let ty = isBlaack ? y - 2 : y + 2
        let gradient = ctx.createRadialGradient(tx, ty, 0, tx, ty, 15)

        gradient.addColorStop(0, isBlaack ? '#ccc' : `#666`)
        gradient.addColorStop(1, isBlaack ? '#000' : '#fff')
        ctx.fillStyle = gradient
        ctx.fill()
        ctx.closePath()

        isBlaack = !isBlaack
      })
    </script>
  </body>
</html>
